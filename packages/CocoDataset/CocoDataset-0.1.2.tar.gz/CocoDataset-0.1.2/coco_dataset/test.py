# -*- coding: utf-8 -*-
"""coco api download

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1FaYQHDm-jpJzqtvPK625Bv4ygDlOVIg7

#Specific Part of CoCo Dataset.
"""

!rm -rf  person

"""#1- step 1 Install pycocotools"""

!pip install pycocotools

"""#2-download annotations_trainival2014"""

!wget http://images.cocodataset.org/annotations/annotations_trainval2014.zip

!unzip /content/annotations_trainval2014.zip

"""#download spicified images for person class example"""

class_name='person'

from pycocotools.coco import COCO
import requests

# instantiate COCO specifying the annotations json path
coco = COCO('/content/annotations/instances_train2014.json')
# Specify a list of category names of interest
catIds = coco.getCatIds(catNms=[class_name])
# Get the corresponding image ids and images using loadImgs
imgIds = coco.getImgIds(catIds=catIds)
images = coco.loadImgs(imgIds)

"""#list dictionaries images """

images

import os 
os.mkdir (class_name)

# Save the images into a local folder
count=0
images_count=50 # specified count images for class name
for im in images:
    img_data = requests.get(im['coco_url']).content
    with open('./'+ class_name +'/'+ im['file_name'], 'wb') as handler:
        handler.write(img_data)
    count+=1
    if count>images_count:
        break
    print('no.of image:',count)