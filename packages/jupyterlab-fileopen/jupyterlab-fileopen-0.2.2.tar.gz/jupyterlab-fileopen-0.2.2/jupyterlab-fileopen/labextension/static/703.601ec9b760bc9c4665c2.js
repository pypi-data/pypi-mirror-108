(self.webpackChunkjupyterlab_fileopen=self.webpackChunkjupyterlab_fileopen||[]).push([[703],{703:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DummyWidget:()=>m,FileOpenFactory:()=>f,default:()=>y});var o,r=n(510),i=n(850),a=n(55),s=n(621),l=n(950),p=n(904),c=n(886),d=n(290);async function u(e="",t={}){const n=d.ServerConnection.makeSettings(),o=c.URLExt.join(n.baseUrl,"jupyterlab-fileopen",e);let r;try{r=await d.ServerConnection.makeRequest(o,t,n)}catch(e){throw new d.ServerConnection.NetworkError(e)}let i=await r.text();if(i.length>0)try{i=JSON.parse(i)}catch(e){console.log("Not a JSON response body.",r)}if(!r.ok)throw new d.ServerConnection.ResponseError(r,i.message||i);return i}!function(e){e.openFileExplorer="jupyterlab-fileopen:open-file-explorer",e.openFile="jupyterlab-fileopen:open-file"}(o||(o={}));class m extends r.Widget{onAfterAttach(){var e;null===(e=this.parent)||void 0===e||e.dispose()}}class f extends a.ABCWidgetFactory{constructor(e,t){super(e),this.app=t}createNewWidget(e){return this.app.commands.execute(o.openFile),new a.DocumentWidget({context:e,content:new m})}}const y={id:"jupyterlab-fileopen:plugin",requires:[s.IFileBrowserFactory,p.ISettingRegistry],autoStart:!0,activate:(e,t,n)=>{Promise.all([e.restored,n.load("jupyterlab-fileopen:jupyterlab-fileopen-settings")]).then((([,t])=>{const n=new f({name:"FileOpen",modelName:"base64",fileTypes:["desktop"],defaultFor:["desktop"],preferKernel:!1,canStartKernel:!1},e),o=t.get("extensions").composite;e.docRegistry.addWidgetFactory(n),e.docRegistry.addFileType({name:"desktop",extensions:o}),e.docRegistry.setDefaultWidgetFactory("desktop","FileOpen")})),e.commands.addCommand(o.openFileExplorer,{execute:()=>{const e=t.tracker.currentWidget;if(e){const t=(0,i.toArray)(e.selectedItems());if(1!==t.length)return;const n=t[0];u("open-file-explorer",{method:"POST",body:JSON.stringify({path:n.path})}).then((e=>{})).catch((e=>{console.error(`The jupyterlab-fileopen server extension appears to be missing.\n${e}`)}))}},icon:l.folderIcon,label:"Reveal In File Explorer"}),e.commands.addCommand(o.openFile,{execute:()=>{const e=t.tracker.currentWidget;if(e){const t=(0,i.toArray)(e.selectedItems());if(1!==t.length)return;const n=t[0];u("open-file",{method:"POST",body:JSON.stringify({path:n.path})}).then((e=>{})).catch((e=>{console.error(`The jupyterlab-fileopen server extension appears to be missing.\n${e}`)}))}},icon:l.folderIcon,label:"Open With Desktop Application"}),e.contextMenu.addItem({command:o.openFileExplorer,selector:".jp-DirListing-item[data-isdir]",rank:2}),e.contextMenu.addItem({command:o.openFile,selector:'.jp-DirListing-item[data-isdir="false"]',rank:2})}}}}]);