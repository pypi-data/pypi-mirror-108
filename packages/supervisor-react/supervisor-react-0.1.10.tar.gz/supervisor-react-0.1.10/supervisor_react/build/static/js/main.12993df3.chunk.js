(this["webpackJsonpsupervisor-app"]=this["webpackJsonpsupervisor-app"]||[]).push([[0],{142:function(e,t){},144:function(e,t){},177:function(e,t,r){"use strict";r.r(t);var n,s=r(0),c=r(11),o=r.n(c),a=r(47),i=r(33),l=r(94),u=r(5),j=r(226),p=r(239),d=r(237),h=r(236),b=r(244),O=r(235),x=r(228),f=r(179),m=r(234),v=r(241),g=r(246),P=r(180),A=r(242),N=r(231),w=r(232),C=r(233),S=r(230),k=r(229),T=r(227),I=r(245),G=r(122),R=r(224),F=r(225),E=r(243),y=r(4),U=r(118),L=r.n(U),z=r(92),D=r.n(z),B=r(93),K=r.n(B),H=r(116),W=r.n(H),V=r(120),X=r.n(V),$=r(117),J=r.n($),M=r(119),q=r.n(M),Q=r(53),Y=r.n(Q),Z=r(12),_=r.n(Z),ee=r(20),te=r(114),re=r(137);!function(e){e[e.STOPPED=0]="STOPPED",e[e.STARTING=10]="STARTING",e[e.RUNNING=20]="RUNNING",e[e.BACKOFF=30]="BACKOFF",e[e.STOPPING=40]="STOPPING",e[e.EXITED=100]="EXITED",e[e.FATAL=200]="FATAL",e[e.UNKNOWN=1e3]="UNKNOWN"}(n||(n={}));n.STOPPED,n.EXITED,n.FATAL,n.UNKNOWN;var ne,se=[n.RUNNING,n.BACKOFF,n.STARTING];!function(e){e[e.FATAL=2]="FATAL",e[e.RUNNING=1]="RUNNING",e[e.RESTARTING=0]="RESTARTING",e[e.SHUTDOWN=-1]="SHUTDOWN"}(ne||(ne={}));var ce=function e(t){var r=this;Object(te.a)(this,e),this.client=void 0,this.setProcesses=void 0,this.methodCall=function(e,t){return new Promise((function(n,s){return r.client.methodCall(e,t,(function(e,t){return e?s(e):n(t)}))}))},this.getSupervisorVersion=function(){return r.methodCall("supervisor.getSupervisorVersion",[])},this.getState=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.methodCall("supervisor.getState",[]);case 2:return e.abrupt("return",e.sent.statename);case 3:case"end":return e.stop()}}),e)}))),this.getAllProcessInfo=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.next=4,r.methodCall("supervisor.getAllProcessInfo",[]);case 4:e.t1=e.sent,e.t0.setProcesses.call(e.t0,e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),r.setProcesses([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),this.startProcess=function(){var e=Object(ee.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.methodCall("supervisor.startProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,r.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startProcessGroup=function(){var e=Object(ee.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.methodCall("supervisor.startProcessGroup",[t]);case 2:return e.next=4,r.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.startAllProcesses=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.methodCall("supervisor.startAllProcesses",[]);case 2:return e.next=4,r.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.stopProcess=function(){var e=Object(ee.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.methodCall("supervisor.stopProcess",["".concat(t.group,":").concat(t.name)]);case 2:return e.next=4,r.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopProcessGroup=function(){var e=Object(ee.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.methodCall("supervisor.stopProcessGroup",[t]);case 2:return e.next=4,r.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stopAllProcesses=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.methodCall("supervisor.stopAllProcesses",[]);case 2:return e.next=4,r.getAllProcessInfo();case 4:case"end":return e.stop()}}),e)}))),this.restartProcess=function(){var e=Object(ee.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!se.includes(t.state)){e.next=4;break}return e.next=4,r.stopProcess(t);case 4:return e.prev=4,e.next=7,r.startProcess(t);case 7:return e.finish(4);case 8:case"end":return e.stop()}}),e,null,[[0,,4,8]])})));return function(t){return e.apply(this,arguments)}}(),this.restartProcessGroup=function(){var e=Object(ee.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.stopProcessGroup(t);case 2:return e.next=4,r.startProcessGroup(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.restartAllProcesses=Object(ee.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.stopAllProcesses();case 2:return e.next=4,r.startAllProcesses();case 4:case"end":return e.stop()}}),e)}))),this.clearProcessLogs=function(e){return r.methodCall("supervisor.clearProcessLogs",["".concat(e.group,":").concat(e.name)])},this.clearAllProcessLogs=function(){return r.methodCall("supervisor.clearAllProcessLogs",[])},this.client=re.createClient({host:window.location.hostname,port:window.location.port,path:"/RPC2"}),this.setProcesses=t},oe=r(3),ae=["title"],ie=["supervisor"],le=function(e){var t=e.title,r=Object(l.a)(e,ae);return Object(oe.jsx)(I.a,{title:t,children:Object(oe.jsx)(p.a,{component:"span",children:Object(oe.jsx)(f.a,Object(i.a)({},r))})})},ue=function(e){var t=e.supervisor,r=Object(l.a)(e,ie),n=Object(s.useState)(""),c=Object(a.a)(n,2),o=c[0],u=c[1];return Object(s.useEffect)((function(){t.getSupervisorVersion().then(u)}),[]),Object(oe.jsxs)(E.a,Object(i.a)(Object(i.a)({},r),{},{children:[Object(oe.jsx)(R.a,{children:"About"}),Object(oe.jsx)(F.a,{dividers:!0,children:Object(oe.jsxs)("ul",{children:[Object(oe.jsxs)("li",{children:["supervisor: ",o]}),Object(oe.jsx)("li",{children:"supervisor-react: 0.1.3"})]})})]}))},je=Object(u.a)({root:{flexGrow:1}})(G.a),pe=function(e){var t=e.supervisor,r=Object(s.useState)(null),n=Object(a.a)(r,2),c=n[0],o=n[1],i=Object(s.useState)(!1),l=Object(a.a)(i,2),u=l[0],p=l[1];return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(j.a,{position:"static",children:Object(oe.jsxs)(T.a,{children:[Object(oe.jsx)(f.a,{color:"inherit",onClick:function(e){return o(e.currentTarget)},children:Object(oe.jsx)(W.a,{})}),Object(oe.jsxs)(v.a,{anchorEl:c,open:null!==c,onClose:function(){return o(null)},children:[Object(oe.jsx)(g.a,{onClick:function(e){return t.stopAllProcesses()},children:"Stop all"}),Object(oe.jsx)(g.a,{onClick:function(e){return t.startAllProcesses()},children:"Start All"}),Object(oe.jsx)(g.a,{onClick:function(e){return t.restartAllProcesses()},children:"Restart All"}),Object(oe.jsx)(g.a,{onClick:function(e){return t.clearAllProcessLogs()},children:"Clear All"}),Object(oe.jsx)(g.a,{onClick:function(e){o(null),p(!0)},children:"About"})]}),Object(oe.jsx)(je,{variant:"h5",children:"Supervisor"}),Object(oe.jsx)(I.a,{title:"Reload Supervisor",children:Object(oe.jsx)(f.a,{color:"inherit",onClick:function(e){return t.getAllProcessInfo()},children:Object(oe.jsx)(J.a,{})})})]})}),Object(oe.jsx)(ue,{supervisor:t,open:u,onClose:function(){return p(!1)}})]})},de=Object(u.a)({root:{minHeight:43,padding:0,"&$expanded":{margin:0,minHeight:43}},content:{margin:0,minHeight:43,"&$expanded":{margin:0}},expanded:{}})(x.a),he=Object(u.a)({root:{"& td:nth-child(1)":{width:200},"& td:nth-child(2)":{width:120},"& td:nth-child(3)":{textAlign:"center",width:73},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(k.a),be=Object(u.a)((function(e){var t=e.palette;return{all:{color:t.success.main},some:{color:t.success.light},none:{color:t.warning.light}}}))((function(e){var t=e.running,r=e.length,n=e.classes;return Object(oe.jsxs)(p.a,{component:"span",className:t===r?n.all:0===t?n.none:n.some,children:[t,"/",r]})})),Oe=Object(u.a)((function(e){return{root:{color:e.palette.success.main}}}))(L.a),xe=Object(u.a)((function(e){return{root:{color:e.palette.error.main}}}))(D.a),fe=Object(u.a)((function(e){return{root:{color:e.palette.warning.main}}}))(D.a),me=function(e){var t=e.process,r=e.supervisor,s=se.includes(t.state)?r.stopProcess:r.startProcess;return Object(oe.jsx)(I.a,{title:t.name,children:Object(oe.jsx)(f.a,{size:"small",onClick:function(e){e.stopPropagation(),s(t)},children:se.includes(t.state)?Object(oe.jsx)(Oe,{}):t.state===n.FATAL?Object(oe.jsx)(xe,{}):Object(oe.jsx)(fe,{})})})},ve=function(e){var t=e.value,r=e.processes,n=e.supervisor,s=Y.a.assign({RUNNING:0,STOPPED:0},Y.a.countBy(r,(function(e){return se.includes(e.state)?"RUNNING":"STOPPED"})));return Object(oe.jsx)(de,{children:Object(oe.jsx)(S.a,{component:P.a,elevation:0,children:Object(oe.jsx)(N.a,{size:"small",children:Object(oe.jsx)(w.a,{children:Object(oe.jsxs)(he,{children:[Object(oe.jsx)(C.a,{children:t}),Object(oe.jsx)(C.a,{}),Object(oe.jsx)(C.a,{children:Object(oe.jsx)(be,{running:s.RUNNING,length:r.length})}),Object(oe.jsx)(C.a,{children:r.map((function(e){return Object(oe.jsx)(me,{process:e,supervisor:n},e.name)}))}),Object(oe.jsxs)(C.a,{padding:"none",children:[Object(oe.jsx)(le,{size:"small",title:"Stop Group",color:"primary",onClick:function(e){e.stopPropagation(),n.stopProcessGroup(t)},disabled:0===s.RUNNING,children:Object(oe.jsx)(q.a,{fontSize:"small"})}),Object(oe.jsx)(le,{size:"small",title:"Start Group",color:"primary",onClick:function(e){e.stopPropagation(),n.startProcessGroup(t)},disabled:s.RUNNING===r.length,children:Object(oe.jsx)(X.a,{fontSize:"small"})}),Object(oe.jsx)(le,{size:"small",title:"Restart Group",color:"primary",onClick:function(e){e.stopPropagation(),n.restartProcessGroup(t)},children:Object(oe.jsx)(K.a,{fontSize:"small"})})]}),Object(oe.jsx)(C.a,{})]})})})})})},ge=Object(u.a)((function(e){var t=e.palette;return{root:{borderRadius:6,color:t.error.contrastText,padding:"2px 4px"},running:{backgroundColor:t.success.main},stopped:{backgroundColor:t.warning.light},fatal:{backgroundColor:t.error.main}}}))((function(e){var t=e.process,r=e.classes;return Object(oe.jsx)(p.a,{component:"span",className:Object(y.a)(r.root,se.includes(t.state)?r.running:t.state!==n.FATAL?r.stopped:r.fatal),children:t.statename})})),Pe=Object(u.a)({root:{"& td:nth-child(1)":{width:120},"& td:nth-child(2)":{width:200},"& td:nth-child(3)":{width:73},"& td:nth-child(5)":{width:132},"& td:nth-child(6)":{width:113}}})(k.a),Ae=Object(u.a)({root:{display:"inline-block",textAlign:"center",width:52}})(p.a),Ne=function(e){var t=e.process;return Object(oe.jsxs)(Pe,{children:[Object(oe.jsx)(C.a,{}),Object(oe.jsx)(C.a,{children:t.name}),Object(oe.jsx)(C.a,{padding:"none",align:"center",children:Object(oe.jsx)(ge,Object(i.a)({},e))}),Object(oe.jsx)(C.a,{children:t.description}),Object(oe.jsxs)(C.a,{padding:"none",children:[Object(oe.jsx)(Ae,{component:"span",children:Object(oe.jsx)(A.a,{size:"small",checked:se.includes(t.state),onChange:function(r){return(se.includes(t.state)?e.supervisor.stopProcess:e.supervisor.startProcess)(t)}})}),Object(oe.jsx)(le,{size:"small",title:"Restart",color:"primary",onClick:function(r){return e.supervisor.restartProcess(t)},children:Object(oe.jsx)(K.a,{fontSize:"small"})})]}),Object(oe.jsxs)(C.a,{children:[Object(oe.jsx)(m.a,{href:"logtail/".concat(t.group,":").concat(t.name),children:"stdout"}),"\xa0",Object(oe.jsx)(m.a,{href:"logtail/".concat(t.group,":").concat(t.name,"/stderr"),children:"stderr"})]})]})},we=Object(u.a)({root:{padding:0}})(O.a),Ce=function(e){return Object(oe.jsx)(we,{children:Object(oe.jsx)(S.a,{children:Object(oe.jsx)(N.a,{size:"small",children:Object(oe.jsx)(w.a,{children:e.processes.map((function(t){return Object(oe.jsx)(Ne,Object(i.a)({process:t},e),t.name)}))})})})})},Se=Object(u.a)({root:{"&$expanded":{margin:0},backgroundColor:"unset"},expanded:{}})(b.a),ke=function(e){return Object(oe.jsxs)(Se,{elevation:0,children:[Object(oe.jsx)(ve,Object(i.a)({},e)),Object(oe.jsx)(Ce,Object(i.a)({},e))]})},Te=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),r=t[0],n=t[1],c=new ce(n);return Object(s.useEffect)((function(){c.getAllProcessInfo()}),[]),Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(h.a,{}),Object(oe.jsxs)(d.a,{fixed:!0,children:[Object(oe.jsx)(pe,{supervisor:c}),Y()(r).groupBy("group").toPairs().sortBy().map((function(e){var t=Object(a.a)(e,2),r=t[0],n=t[1];return Object(oe.jsx)(ke,{value:r,processes:Y.a.sortBy(n,"name"),supervisor:c},r)})).value()]})]})},Ie=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,248)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),s(e),c(e),o(e)}))};o.a.render(Object(oe.jsx)(s.StrictMode,{children:Object(oe.jsx)(Te,{})}),document.getElementById("root")),Ie()}},[[177,1,2]]]);